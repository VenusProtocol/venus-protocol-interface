import { get{{name}}Contract, get{{name}}ContractAddress } from '@venusprotocol/web3';
import { useMemo } from 'react';

import { useChainId, useProvider, useSigner } from 'libs/wallet';
import { ChainId } from 'types';

export const useGet{{name}}ContractAddress = ({
  comptrollerContractAddress,
  chainId: passedChainId,
}: {
  comptrollerContractAddress: string;
  chainId?: ChainId;
}) => {
  const { chainId: currentChainId } = useChainId();
  const chainId = passedChainId || currentChainId;

  return useMemo(
    () =>
      get{{name}}ContractAddress({
        chainId,
        comptrollerContractAddress,
      }),
    [chainId, comptrollerContractAddress],
  );
};

export const useGet{{name}}Contract = ({
  passSigner = false,
  comptrollerContractAddress,
  chainId: passedChainId,
}: {
  passSigner: boolean;
  comptrollerContractAddress: string;
  chainId?: ChainId;
}) => {
  const { chainId: currentChainId } = useChainId();
  const chainId = passedChainId || currentChainId;

  const { provider } = useProvider({ chainId });
  const { signer } = useSigner({ chainId });
  const signerOrProvider = passSigner ? signer : provider;

  return useMemo(
    () =>
      signerOrProvider
        ? get{{name}}Contract({
            chainId,
            comptrollerContractAddress,
            signerOrProvider,
          })
        : undefined,
    [signerOrProvider, chainId, comptrollerContractAddress],
  );
};